let recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
recognition.continuous = true;  // Keeps listening after each command
recognition.interimResults = false; 
recognition.lang = 'en-US';

function startListening() {
    speak("I'm listening. Say 'stop listening' when you are done.");
    recognition.start();
}

recognition.onresult = function (event) {
    let transcript = event.results[event.results.length - 1][0].transcript.toLowerCase();
    console.log("User said: ", transcript);
    
    // Process commands continuously
    takeCommand(transcript);
    
    // Stop listening if user says "stop listening"
    if (transcript.includes("stop listening")) {
        speak("Okay, stopping now.");
        recognition.stop();
    }
};

recognition.onerror = function (event) {
    console.error("Error in recognition: ", event.error);
    speak("Sorry, I couldn't hear you.");
};

// Trigger Omnix with a single button click
document.getElementById("start-button").addEventListener("click", startListening);













let btn = document.querySelector("#btn");
let content = document.querySelector("#content");
let listeningText = document.querySelector("#listening");

let speechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
let recognition = new speechRecognition();

recognition.onstart = () => {
    listeningText.style.display = "block"; // Show "Listening..."
    btn.style.display = "none"; // Hide the button
};
